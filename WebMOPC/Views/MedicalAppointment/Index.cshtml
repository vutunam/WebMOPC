@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
	var imgPath = HttpContextAccessor.HttpContext?.Session.GetString("img") ?? "~/img/user.png";
	var isRole = HttpContextAccessor.HttpContext.Session.GetInt32("isRole");
}
@addTagHelper *,Microsoft.AspNetCore.Mvc.TagHelpers
@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="container-xxl flex-grow-1 container-p-y">
	<div class="row">
		<div class="col-xl-12">
			<div class="nav-align-top mb-2">
				<ul class="nav nav-pills mb-3 nav-fill" role="tablist">
					<li class="nav-item">
						<button type="button" class="nav-link active" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-home" aria-controls="navs-pills-justified-home" aria-selected="true">
							<i class="fa-solid fa-calendar-days"></i> Lịch khám
						</button>
					</li>
					<li class="nav-item">
						<button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-profile" aria-controls="navs-pills-justified-profile" aria-selected="false">
							<i class="fa-solid fa-calendar-plus"></i> Đặt lịch hẹn khám
						</button>
					</li>
					<li class="nav-item">
						<button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navs-pills-justified-messages" aria-controls="navs-pills-justified-messages" aria-selected="false">
							<i class="tf-icons bx bx-message-square"></i> Lịch và kết quả khám
						</button>
					</li>
				</ul>
				<div class="tab-content p-2">
					<div class="tab-pane fade active show" id="navs-pills-justified-home" role="tabpanel" style="min-height:500px;">
						<div class="card-body p-0" style="min-height: 700px;">
							<div class="row">
								<div class="col-12">
									<div id="calendar" class="p-2 rounded" style="max-height: 700px; font-size: 14px;"></div>
								</div>

							</div>
						</div>
					</div>
					<div class="tab-pane fade" id="navs-pills-justified-profile" role="tabpanel">

						<div class="row">
							<!-- Phần ảnh chiếm 4 cột -->
							<div class="col-xl-4 mb-3 text-center">
								<img src="~/img/datlich.png" alt="Alternate Text" class="img-fluid mb-3" />

								<!-- Nút cập nhật lớn hơn và căn giữa -->
								<button class="btn btn-success btn-lg px-4" id="" @* onclick="return SaveInfor();" *@>
									Đặt lịch khám
								</button>


								<span class="row pt-2" style="color:red;">
									⚠️ Lưu ý: Đặt lịch cần đặt cọc 50.000 VNĐ. Chúng tôi sẽ xác nhận trước 1 giờ và hoàn tiền nếu hủy lịch.
								</span>
							</div>

							<!-- Phần control chiếm 8 cột -->
							<div class="col-xl-8">
								<div class="row">
									<!-- Ngày giờ bắt đầu -->
									<div class="col-md-6 mb-3">
										<label for="startTime" class="form-label">Ngày giờ bắt đầu</label>
										<input type="datetime-local" class="form-control" id="startTime">
									</div>

									<!-- Ngày giờ kết thúc -->
									<div class="col-md-6 mb-3">
										<label for="endTime" class="form-label">Ngày giờ kết thúc</label>
										<input type="datetime-local" class="form-control" id="endTime">
									</div>

									<!-- Loại khám -->
									<div class="col-md-6 mb-3">
										<label for="visitType" class="form-label">Loại khám</label>
										<select class="form-select" id="visitType">
											<option value="0">Khám</option>
											<option value="1">Tái khám</option>
										</select>
									</div>

									<!-- Phòng ban -->
									<div class="col-md-6 mb-3">
										<label for="department" class="form-label">Phòng khám</label>
										<select class="form-select" id="department">
											<option value="0">-- Chọn phòng khám --</option>
										</select>
									</div>

									<!-- Bác sĩ -->
									<div class="col-md-6 mb-3">
										<label for="doctor" class="form-label">Bác sĩ</label>
										<select class="form-select" id="doctor">
											<option value="0">-- Chọn bác sĩ --</option>
										</select>
									</div>

									<div class="col-md-6 mb-3">
										<label for="doctor" class="form-label">Dịch vụ</label>
										<select class="form-select" id="service">
											<option value="0">-- Chọn dịch vụ --</option>
										</select>
									</div>

									<!-- Ghi chú -->
									<div class="col-md-12 mb-3">
										<label for="note" class="form-label">Ghi chú</label>
										<textarea class="form-control" id="note" rows="5" placeholder="Nhập ghi chú..."></textarea>
									</div>
								</div>
							</div>

						</div>
					</div>
					<div class="tab-pane fade" id="navs-pills-justified-messages" role="tabpanel">
						<form method="get">
							<div class="row">
								<div class="col-sm-2 mb-2">
									<label class="form-label">Ngày bắt đầu</label>
									<input type="date" class="form-control form-control-sm" id="startDate" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
								</div>

								<div class="col-sm-2 mb-2">
									<label class="form-label">Ngày kết thúc</label>
									<input type="date" class="form-control form-control-sm" id="endDate" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
								</div>
								<div class="col-sm-2 mb-2">
									<label class="form-label">Phòng khám</label>
									<select class="form-control select2 form-control-sm" asp-items="@ViewBag.Department" id="appDepartment">
										<option value="">Tất cả</option>
									</select>
								</div>
								<div class="col-sm-2 mb-2">
									<label class="form-label">Bác sĩ</label>
									<select class="form-control select2 form-control-sm"  id="appDoctor">
										<option value="">Tất cả</option>
									</select>
								</div>
								<div class="col-sm-2 mb-2">
									<label class="form-label">Dịch vụ</label>
									<select class="form-control select2 form-control-sm" id="appSevice">
										<option value="">Tất cả</option>
									</select>
								</div>
								<div class="col-sm-2 mb-2">
									<label class="form-label">Từ khóa</label>
									<div class="input-group input-group-sm">
										<input type="text" id="deKeyword" class="form-control" placeholder="Từ khóa ..." />
										<div class="input-group-append">
											<button type="button" class="btn btn-success btn-sm" onclick="return GetAllDepartments();">
												<i class="fas fa-search"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
						</form>

						<div class="mt-2 border" id="department_tb"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script src="~/assets/vendor/Jquery/jquery.min.js"></script>

<script src="~/js/MedicalAppointment.js"></script>

